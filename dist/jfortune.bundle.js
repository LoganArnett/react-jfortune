!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define("jfortune",["react"],e):"object"==typeof exports?exports.jfortune=e(require("react")):t.jfortune=e(t.react)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";function r(t){var e=[[Math.cos(t),Math.sin(t),0,0],[Math.sin(-t),Math.cos(t),0,0],[0,0,1,0],[0,0,0,1]],n=function(t,e,n){return t+(n>0?",":"")+e.join(",")};return e.reduce(n,"")}function i(t){var e="matrix3d("+t+")";return{transform:e,WebkitTransform:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.matrix3dRotateZ=r,e.createTransformFromMatrix3d=i},function(t,e,n){"use strict";function r(t,e){var n=e-t,r=n+1;return Math.floor(Math.random()*r)+t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=400,i=function(t){return 1/(200*t)},o=function(t,e,n,o){var s=3*t,a=3*(n-t)-s,u=1-s-a,c=3*e,p=3*(o-e)-c,l=1-c-p,f=function(t){return((u*t+a)*t+s)*t},h=function(t){return((l*t+p)*t+c)*t},d=function(t){return(3*u*t+2*a)*t+s},m=function(t,e){var n,r,i,o,s,a;for(i=t,a=0;a<8;a++){if(o=f(i)-t,Math.abs(o)<e)return i;if(s=d(i),Math.abs(s)<1e-6)break;i-=o/s}if(n=0,r=1,i=t,i<n)return n;if(i>r)return r;for(;n<r;){if(o=f(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},y=function(t,e){return h(m(t,e))};return function(t,e){return y(t,i(+e||r))}};e.default={linear:o(0,0,1,1),ease:o(.25,.1,.25,1),easeIn:o(.42,0,1,1),easeOut:o(0,0,.58,1),easeInOut:o(.42,0,.58,1),cubicBezier:function(t,e,n,r,i,s){return o(t,e,n,r)(i,s)}}},function(e,n){e.exports=t},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.JFortuneDirection=e.default=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),c=r(u),p=n(2),l=r(p),f=n(1),h=r(f),d=n(0),m=function(t){throw Error(t+" must be defined!")},y=Object.freeze({__proto__:null,CLOCKWISE:1,COUNTER_CLOCKWISE:-1}),b={directionMultiplier:function(){return this.direction===y.COUNTER_CLOCKWISE?-1:1},needsBounce:function(){var t=this.state,e=t.gap,n=t.options,r=.5*e,i=Math.abs((r+this.angle)%e),o=Math.abs(this.angle-this.prev_angle),s=.5*n.separatorThickness,a=e-s;return o>=r?1:i<s||i>a?2:0},rotate:function(t,e){this.direction=e,this.angle=t,this.doRotate(t);var n=b.needsBounce.call(this);n?(1!==n&&this.state.isBouncing||this.state.options.onSpinBounce(this),this.doSpinnerBounce(b.directionMultiplier.call(this))):this.stopSpinnerBounce(),this.prev_angle=this.angle},forceEnd:function(){var t=this.state.options;this.spinFrame&&cancelAnimationFrame(this.spinFrame),b.rotate.call(this,this.stop,this.direction),this.stopSpinnerBounce(),this.deferred&&this.fulfilled(Array.isArray(t.prices)?t.prices[this.price]:this.price)}},v=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r=Object.assign({},e.defaultOptions,t.options),s=r.prices,a=void 0===s?m("options.prices"):s,u=Array.isArray(a)?a.length:a,c=360/u;return n.direction=r.direction,n.spin=n.spin.bind(n),n.doSpin=n.doSpin.bind(n),n.state={options:r,total:u,gap:c},n}return s(e,t),a(e,[{key:"spin",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.options.direction,r=arguments[2],i=this.state,o=i.options,s=i.total,a=i.gap;if(this.deferred=new Promise(function(t,n){e.fulfilled=t,e.rejected=n}),r)this.price=t,this.stop=b.directionMultiplier.call(this,n)*r;else{this.price="number"==typeof t?t:Math.floor(Math.random()*s);var u=(0,h.default)(o.separation,a-o.separation),c="counterclockwise"===this.direction?s-this.price:this.price,p=a*(c-.5),l=p+u,f=(0,h.default)(o.minSpins,o.maxSpins),d=360*f;this.stop=b.directionMultiplier.call(this,n)*(d+l)}return this.prev_angle=this.start_time=0,this.spin_frame=requestAnimationFrame(this.doSpin),this.deferred}},{key:"doSpin",value:function(t){this.start_time=this.start_time||t;var e=t-this.start_time,n=this.state,r=n.options.bezier,i=n.options;if(e<i.duration){var o=e/i.duration,s=l.default.cubicBezier(r.p1x,r.p1y,r.p2x,r.p2y,o);this.angle=s*this.stop,b.rotate.call(this,this.angle,this.direction)}else b.forceEnd.call(this);Math.abs(this.angle)<Math.abs(this.stop)?this.spin_frame=requestAnimationFrame(this.doSpin):this.fulfilled(Array.isArray(i.prices)?i.prices[this.price]:this.price)}},{key:"doRotate",value:function(t){var e=(0,d.matrix3dRotateZ)(t*Math.PI/180);this.setState({wheelMatrix:e})}},{key:"doSpinnerBounce",value:function(t){var e=(0,d.matrix3dRotateZ)(5*t*Math.PI/180);this.setState({spinnerMatrix:e,isBouncing:!0})}},{key:"stopSpinnerBounce",value:function(){var t=(0,d.matrix3dRotateZ)(0);this.setState({spinnerMatrix:t,isBouncing:!1})}},{key:"render",value:function(){var t=this.props.children,e=this.state,n=e.spinnerMatrix,r=e.wheelMatrix,i=e.options,o=i.wheelClassname,s=i.spinnerClassname;return c.default.createElement("div",null,c.default.createElement("div",{className:o,style:(0,d.createTransformFromMatrix3d)(r)}),c.default.createElement("div",{className:s,style:(0,d.createTransformFromMatrix3d)(n)},t||null))}}]),e}(u.Component);v.propTypes={options:u.PropTypes.object.isRequired,children:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.element])},v.defaultOptions={duration:1e3,separation:5,minSpins:10,maxSpins:15,direction:y.CLOCKWISE,wheelClassname:"wheel",spinnerClassname:"spinner",bezier:{p1x:.17,p1y:.67,p2x:.12,p2y:.99},separatorThickness:7,onSpinBounce:Function.prototype},e.default=v,e.JFortuneDirection=y}])});