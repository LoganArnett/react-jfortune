!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("jfortune",["react"],t):"object"==typeof exports?exports.jfortune=t(require("react")):e.jfortune=t(e.react)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function r(e){var t=[[Math.cos(e),Math.sin(e),0,0],[Math.sin(-e),Math.cos(e),0,0],[0,0,1,0],[0,0,0,1]],n=function(e,t,n){return e+(n>0?",":"")+t.join(",")};return t.reduce(n,"")}function i(e){var t="matrix3d("+e+")";return{transform:t,WebkitTransform:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.matrix3dRotateZ=r,t.createTransformFromMatrix3d=i},function(e,t,n){"use strict";function r(e,t){var n=t-e,r=n+1;return Math.floor(Math.random()*r)+e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=400,i=function(e){return 1/(200*e)},o=function(e,t,n,o){var s=3*e,a=3*(n-e)-s,u=1-s-a,c=3*t,p=3*(o-t)-c,f=1-c-p,l=function(e){return((u*e+a)*e+s)*e},h=function(e){return((f*e+p)*e+c)*e},d=function(e){return(3*u*e+2*a)*e+s},m=function(e,t){var n,r,i,o,s,a;for(i=e,a=0;a<8;a++){if(o=l(i)-e,Math.abs(o)<t)return i;if(s=d(i),Math.abs(s)<1e-6)break;i-=o/s}if(n=0,r=1,i=e,i<n)return n;if(i>r)return r;for(;n<r;){if(o=l(i),Math.abs(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i},y=function(e,t){return h(m(e,t))};return function(e,t){return y(e,i(+t||r))}};t.default={linear:o(0,0,1,1),ease:o(.25,.1,.25,1),easeIn:o(.42,0,1,1),easeOut:o(0,0,.58,1),easeInOut:o(.42,0,.58,1),cubicBezier:function(e,t,n,r,i,s){return o(e,t,n,r)(i,s)}}},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.JFortuneDirection=t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(3),c=r(u),p=n(2),f=r(p),l=n(1),h=r(l),d=n(0),m=function(e){throw Error(e+" must be defined!")},y=Object.freeze({__proto__:null,CLOCKWISE:1,COUNTER_CLOCKWISE:-1}),v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=Object.assign({},t.defaultOptions,e.options),s=r.prices,a=void 0===s?m("options.prices"):s,u=Array.isArray(a)?a.length:a,c=360/u;return n.direction=r.direction,n.spin=n.spin.bind(n),n.doSpin=n.doSpin.bind(n),n.state={options:r,total:u,gap:c},n}return s(t,e),a(t,[{key:"spin",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.options.direction,r=arguments[2],i=this.state,o=i.options,s=i.total,a=i.gap;if(this.deferred=new Promise(function(e,n){t.fulfilled=e,t.rejected=n}),r)this.price=e,this.stop=this.directionMultiplier(n)*r;else{this.price="number"==typeof e?e:Math.floor(Math.random()*s);var u=(0,h.default)(o.separation,a-o.separation),c="counterclockwise"===this.direction?s-this.price:this.price,p=a*(c-.5),f=p+u,l=(0,h.default)(o.minSpins,o.maxSpins),d=360*l;this.stop=this.directionMultiplier(n)*(d+f)}return this.prev_angle=this.start_time=0,this.spin_frame=requestAnimationFrame(this.doSpin),this.deferred}},{key:"directionMultiplier",value:function(){return this.direction===y.COUNTER_CLOCKWISE?-1:1}},{key:"doSpin",value:function(e){this.start_time=this.start_time||e;var t=e-this.start_time,n=this.state,r=n.options.bezier,i=n.options;if(t<i.duration){var o=t/i.duration,s=f.default.cubicBezier(r.p1x,r.p1y,r.p2x,r.p2y,o);this.angle=s*this.stop,this.rotate(this.angle,this.direction)}else this.forceEnd();Math.abs(this.angle)<Math.abs(this.stop)?this.spin_frame=requestAnimationFrame(this.doSpin):this.fulfilled(Array.isArray(i.prices)?i.prices[this.price]:this.price)}},{key:"rotate",value:function(e,t){this.direction=t;var n=this.directionMultiplier();this.angle=e,this.doRotate(e);var r=this.needsBounce();r?(1!==r&&this.state.isBouncing||this.state.options.onSpinBounce(this),this.doSpinnerBounce(n)):this.stopSpinnerBounce(),this.prev_angle=this.angle}},{key:"forceEnd",value:function(){var e=this.state.options;this.spinFrame&&cancelAnimationFrame(this.spinFrame),this.rotate(this.stop,this.direction),this.stopSpinnerBounce(),this.deferred&&this.fulfilled(Array.isArray(e.prices)?e.prices[this.price]:this.price)}},{key:"needsBounce",value:function(){var e=this.state,t=e.gap,n=e.options,r=.5*t,i=Math.abs((r+this.angle)%t),o=Math.abs(this.angle-this.prev_angle),s=.5*n.separatorThickness,a=t-s;return o>=r?1:i<s||i>a?2:0}},{key:"doRotate",value:function(e){var t=(0,d.matrix3dRotateZ)(e*Math.PI/180);this.setState({wheelMatrix:t})}},{key:"doSpinnerBounce",value:function(e){var t=(0,d.matrix3dRotateZ)(5*e*Math.PI/180);this.setState({spinnerMatrix:t,isBouncing:!0})}},{key:"stopSpinnerBounce",value:function(){var e=(0,d.matrix3dRotateZ)(0);this.setState({spinnerMatrix:e,isBouncing:!1})}},{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.spinnerMatrix,r=t.wheelMatrix,i=t.options,o=i.wheelClassname,s=i.spinnerClassname;return c.default.createElement("div",null,c.default.createElement("div",{className:o,style:(0,d.createTransformFromMatrix3d)(r)}),c.default.createElement("div",{className:s,style:(0,d.createTransformFromMatrix3d)(n)},e||null))}}]),t}(u.Component);v.propTypes={options:u.PropTypes.object.isRequired,children:u.PropTypes.oneOfType([u.PropTypes.string,u.PropTypes.element])},v.defaultOptions={duration:1e3,separation:5,minSpins:10,maxSpins:15,direction:y.CLOCKWISE,wheelClassname:"wheel",spinnerClassname:"spinner",bezier:{p1x:.17,p1y:.67,p2x:.12,p2y:.99},separatorThickness:7,onSpinBounce:Function.prototype},t.default=v,t.JFortuneDirection=y}])});